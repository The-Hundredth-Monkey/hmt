_:
  verbs:   [use, set, update, '*']
  modules: [HMT, Microsoft.PowerShell.*, MM_*, HM_*, Carbon.*] 

packages and tools:
  stage: restart 
  chocolatey: latest                                  # Use-Chocolatey -Latest
  packages:                                           # Use-Packages -Chocolatey @(..) -Gem @(...) 
    - chocolatey:
      - copyq
      - everything --params '/Service'
      - totalcommander --params /DefaultFM'
    - gem:
      - gist
      - nanoc
  git repositories:                                   # Use-GitRepositories -Repos @() -Root
    root: c:\work
    repos:
     - majkinetor/posh
     - majkinetor/profile_d
     - whlmt/Debloat-Win-10

windows update:     
  stage: [restart. rerurn] 
  windows update:                                     # Invoke-WindowsUpdate -Category critical
    category: critical
    
windows config:
  stage: restart
  explorer options: [show hidden files, show system]  # Set-ExplorerOptions -ShowHiddenFiles -ShowSystem
  ps remoting: force                                  # Enable-PSRemoting -Force
  locale: {city: belgrade}                            # Set-Locale -City Belgrade
  language settings: [en-uk, sr-lat, sr-cyr]          # Set-LanguageSettings @(...)
  proxy:                                              # Update-Proxy -Server 10.35.9.55 -Enable 1
     server: 10.35.9.55:8080
     enable: 1      
  computer name: 
      $$: |
        $systeminfo = gwmi Win32_ComputerSystem
        $manufacturer = $systeminfo.Manufacturer -split ' ' | select -first 1
        $year = (get-date).ToString('yy')
        $name = 'mm-{0}{1}-w10' -f $manufacturer.ToLower(), $year
        if ($name.Lenght -gt 15) { $name.Substring(0,14) } else { $name }

      $systeminfo:    gwmi Win32_ComputerSystem
      $manufacturer:  $systeminfo.Manufacturer -split ' ' | select -first 1
      $name:          mm-$manufacturer-w10
      $name1:          if ($name.Lenght -gt 15) { $name.Substring(0,14) } else { $name }

      params:         $name1    # or $$

custom scripts:
  script: |
    if (Get-Random) {
       log 'meh'
    }
  pinned applications:                               # Set-PinnedApplication @(...)
    - $Env:ProgramFiles\NPP\npp.exe
    - $Env:ProgramFiles\Conemu\Conemu.exe

debloat windows:
   stage: always restart
   script: |
     cd c:\source\debloat-windows-10
     ls scripts\*.ps1 | { Write-Host $_; . $_ }